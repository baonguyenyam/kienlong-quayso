var interval,giaikhuyenkhich={text:"XXXXXX",chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",lists:[],lastkey:"",click:1,play:1,press:1,ltr:!1,newlists:[],animation:4,result:[]};function updateUerWin(i){for(var t=[],e=0;e<i.length;e++){var n=i[e].split(";")[0];t.push(n)}var h=t.toString();0<t.length&&$.ajax({url:AppURL.giai_khuyenkhich_update+h,type:"GET",dataType:"json",cache:!0,complete:function(i){}})}function getData(){$.ajax({url:AppURL.giai_khuyenkhich,type:"GET",dataType:"json",cache:!0,complete:function(i){var t=i.responseJSON.data_giaikhuyenkhich;giaikhuyenkhich.text=t.lists,giaikhuyenkhich.autotime=t.autotime,giaikhuyenkhich.step=t.step,giaikhuyenkhich.autostop=t.autostop,giaikhuyenkhich.lists=t.lists,giaikhuyenkhich.imgs=t.imgs,updateUerWin(giaikhuyenkhich.lists),getPerLoop(giaikhuyenkhich.lists,giaikhuyenkhich.step),t.bgimg&&setTimeout(function(){$("body").css({"background-image":"url("+t.bgimg+")"})},200),t.demo&&DemoMode()}})}function getPerLoop(i,t){var e=Math.floor(parseInt(i.length)/parseInt(t)),n=i.length-e*t;if(i.length%t==0)for(var h=0;h<t;h++)giaikhuyenkhich.newlists[h]=i.slice(h*e,e+h*e);else for(h=0;h<t;h++)if(h<n)for(var a=0;a<n;a++)giaikhuyenkhich.newlists[a]=i.slice(a*e+a,e+a*e+(a+1));else giaikhuyenkhich.newlists[h]=i.slice(h*e+1,e+h*e+1);$(".text-kienlong-per").html("L·∫ßn quay "+giaikhuyenkhich.click+"/"+t)}function shuffle(i){for(var t,e,n=i.length;0!==n;)e=Math.floor(Math.random()*n),t=i[n-=1],i[n]=i[e],i[e]=t;return i}function sf(){return shuffle(giaikhuyenkhich.chars.split(""))}function getRandomKey(){$(".timthay").show();var i=giaikhuyenkhich.autostop;getTotalWin(i),$("#wheels .boxnone").removeClass("showlist").addClass("animated").css({"animation-duration":giaikhuyenkhich.newlists[giaikhuyenkhich.click-1].length*giaikhuyenkhich.animation/100+"s"}),$(".text-kienlong-per").html("L·∫ßn quay "+giaikhuyenkhich.click+"/"+giaikhuyenkhich.step),document.title="ƒêang t√¨m ng∆∞·ªùi may m·∫Øn...",$(".stepbystep p").html("ƒêang quay s·ªë..."),$("#jackpot").get(0).play();document.getElementById("getnum");var t=document.getElementById("getnumautosop");if(forList(giaikhuyenkhich.newlists[giaikhuyenkhich.click-1]),i){giaikhuyenkhich.autotime;var e=giaikhuyenkhich.press;countDown(),t.setAttribute("disabled","disabled");var n=setInterval(function(){stopKey(),--e<=0?clearInterval(n):countDown()},giaikhuyenkhich.autotime)}else $("#getnum").hide(),$("#getnumautosop").hide(),$(".loading").show(),$("#stopnum").show()}function getKey(i){$("#wheels .boxnone").html(),forList(giaikhuyenkhich.newlists[giaikhuyenkhich.click-1])}function countDown(){var i=giaikhuyenkhich.autotime/1e3,t=document.getElementById("getnumautosop");t.innerHTML="ƒêang quay - ("+i+")";var e=setInterval(function(){(i-=1)<0?clearInterval(e):(document.title="("+i+") - ƒêang t√¨m ng∆∞·ªùi may m·∫Øn...",t.innerHTML="ƒêang quay - ("+i+")")},1e3)}function stopKeyEnd(){$("#jackpot").get(0).pause(),$(".loading").hide(),$(".boxnone").animate({scrollTop:0},0),setTimeout(function(){$("body").addClass("phaono"),$("#congrats").show(),document.title="‚ú®üåü Xin ch√∫c m·ª´ng! üåü‚ú®",fancyPopIn(),$("#buzzer").get(0).play()},300),setTimeout(function(){giaikhuyenkhich.click-1<giaikhuyenkhich.step?($("#getnumautosop").removeAttr("disabled").html("ƒê·ª£t quay th·ª© "+giaikhuyenkhich.click),$("#getnumautosop").show()):($("#ketqua").show(),updateUerWin(giaikhuyenkhich.lists),$(".timthay").html("T√¨m th·∫•y t·ªïng c·ªông "+giaikhuyenkhich.text.length+" ng∆∞·ªùi may m·∫Øn")),$("body").removeClass("phaono")},2e3)}function stopKey(){if($("#pot").get(0).play(),$("#wheels .boxnone").removeClass("animated"),$(".wheels").addClass("showlist"),$("#wheels .boxnone").addClass("showlist"),giaikhuyenkhich.click++,setTimeout(function(){$("#pot").get(0).pause()},1e3),giaikhuyenkhich.click-1<=giaikhuyenkhich.step)return stopKeyEnd(),$("#stopnum").hide(),!1}function showList(){$("#showlist").after("<p class='mb-0 h4'>K·∫øt qu·∫£ quay s·ªë ƒë√£ ƒë∆∞·ª£c l∆∞u v√†o c∆° s·ªü d·ªØ li·ªáu.</p>"),$("#showlist").remove()}function getTotalWin(i){$("#stopnum").css({cursor:"wait","pointer-events":"none",opacity:".5"}),$("#stopnum").html("ƒêang quay..."),$(".counter").each(function(){var i=$(this),t=giaikhuyenkhich.newlists[giaikhuyenkhich.click-1].length;$({countNum:0}).animate({countNum:t},{duration:giaikhuyenkhich.autotime,easing:"linear",step:function(){i.text(Math.floor(this.countNum))},complete:function(){i.text(this.countNum),$("#stopnum").css({cursor:"pointer","pointer-events":"initial",opacity:"1"}),$("#stopnum").html("D·ª´ng quay")}})}),i&&setTimeout(function(){$("#getnumautosop").hide()},giaikhuyenkhich.autotime*giaikhuyenkhich.press)}function forList(i){$(".boxnonehome").remove();for(var t=[],e=i,n=0;n<e.length;n++){var h=e[n].split(";");t.push('<div class="wheel"><div class="item"><h2><span>'+(n+1)+".</span>"+h[1]+"</h2><p>"+h[3]+"</p><p>"+h[4]+"</p><p>"+h[5]+"</p></div></div>")}return $("#wheels .boxnone").html(t)}function doSearch(){for(var i=giaikhuyenkhich.text,t=[],e=0;e<i.length;e++){var n="<tr><td>"+(e+1)+"</td><td>"+i[e].split(";")[3]+"</td><td>"+i[e].split(";")[1]+"</td><td>"+i[e].split(";")[5]+"</td><td>"+i[e].split(";")[4]+"</td><tr>";t.push(n)}$(".table-kienlong tbody").append(t),$(".resultbox").show(),$(".getloading").hide()}function ketqua(){$(".wheels, .text-kienlong, .boxnone").hide(),$(".getloading").show(),doSearch()}getData();