var interval,giaikhuyenkhich={text:"XXXXXX",chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",lists:[],lastkey:"",click:1,play:1,press:1,ltr:!1,newlists:[],animation:4,result:[]};function updateUerWin(t){for(var i=[],e=0;e<t.length;e++){var n=t[e].split(";")[0];i.push(n)}var h=i.toString();0<i.length&&$.ajax({url:AppURL.giai_khuyenkhich_update+h,type:"GET",dataType:"json",cache:!0,complete:function(t){}})}function getData(){$.ajax({url:AppURL.giai_khuyenkhich,type:"GET",dataType:"json",cache:!0,complete:function(t){var i=t.responseJSON.data_giaikhuyenkhich;giaikhuyenkhich.text=i.lists,giaikhuyenkhich.autotime=i.autotime,giaikhuyenkhich.step=i.step,giaikhuyenkhich.autostop=i.autostop,giaikhuyenkhich.lists=i.lists,giaikhuyenkhich.imgs=i.imgs,updateUerWin(giaikhuyenkhich.lists),getPerLoop(giaikhuyenkhich.lists,giaikhuyenkhich.step),i.bgimg&&setTimeout(function(){$("body").css({"background-image":"url("+i.bgimg+")"})},200),i.demo&&DemoMode()}})}function getPerLoop(t,i){var e=Math.floor(parseInt(t.length)/parseInt(i)),n=t.length-e*i;if(t.length%i==0)for(var h=0;h<i;h++)giaikhuyenkhich.newlists[h]=t.slice(h*e,e+h*e);else for(h=0;h<i;h++)if(h<n)for(var a=0;a<n;a++)giaikhuyenkhich.newlists[a]=t.slice(a*e+a,e+a*e+(a+1));else giaikhuyenkhich.newlists[h]=t.slice(h*e+1,e+h*e+1);$(".text-kienlong-per").html("L·∫ßn quay "+giaikhuyenkhich.click+"/"+i)}function shuffle(t){for(var i,e,n=t.length;0!==n;)e=Math.floor(Math.random()*n),i=t[n-=1],t[n]=t[e],t[e]=i;return t}function sf(){return shuffle(giaikhuyenkhich.chars.split(""))}function getRandomKey(){$(".timthay").show();var t=giaikhuyenkhich.autostop;getTotalWin(t),$("#wheels .boxnone").removeClass("showlist").addClass("animated").css({"animation-duration":giaikhuyenkhich.newlists[giaikhuyenkhich.click-1].length*giaikhuyenkhich.animation/100+"s"}),$(".text-kienlong-per").html("L·∫ßn quay "+giaikhuyenkhich.click+"/"+giaikhuyenkhich.step),document.title="ƒêang t√¨m ng∆∞·ªùi may m·∫Øn...",$(".stepbystep p").html("ƒêang quay s·ªë..."),$("#jackpot").get(0).play();document.getElementById("getnum");var i=document.getElementById("getnumautosop");if(forList(giaikhuyenkhich.newlists[giaikhuyenkhich.click-1]),t){giaikhuyenkhich.autotime;var e=giaikhuyenkhich.press;countDown(),i.setAttribute("disabled","disabled");var n=setInterval(function(){stopKey(),--e<=0?clearInterval(n):countDown()},giaikhuyenkhich.autotime)}else $("#getnum").hide(),$("#getnumautosop").hide(),$(".loading").show(),$("#stopnum").show()}function getKey(t){$("#wheels .boxnone").html(),forList(giaikhuyenkhich.newlists[giaikhuyenkhich.click-1])}function countDown(){var t=giaikhuyenkhich.autotime/1e3,i=document.getElementById("getnumautosop");i.innerHTML="ƒêang quay - ("+t+")";var e=setInterval(function(){(t-=1)<0?clearInterval(e):(document.title="("+t+") - ƒêang t√¨m ng∆∞·ªùi may m·∫Øn...",i.innerHTML="ƒêang quay - ("+t+")")},1e3)}function stopKeyEnd(){$("#jackpot").get(0).pause(),$(".loading").hide(),$(".boxnone").animate({scrollTop:0},0),setTimeout(function(){$("body").addClass("phaono"),$("#congrats").show(),document.title="‚ú®üåü Xin ch√∫c m·ª´ng! üåü‚ú®",fancyPopIn(),$("#buzzer").get(0).play()},300),setTimeout(function(){giaikhuyenkhich.click-1<giaikhuyenkhich.step?($("#getnumautosop").removeAttr("disabled").html("Quay s·ªë"),$("#getnumautosop").show()):($("#ketqua").show(),updateUerWin(giaikhuyenkhich.lists),$(".timthay").html("T√¨m th·∫•y t·ªïng c·ªông "+giaikhuyenkhich.text.length+" ng∆∞·ªùi may m·∫Øn")),$("body").removeClass("phaono")},2e3)}function stopKey(){if($("#pot").get(0).play(),$("#wheels .boxnone").removeClass("animated"),$(".wheels").addClass("showlist"),$("#wheels .boxnone").addClass("showlist"),giaikhuyenkhich.click++,setTimeout(function(){$("#pot").get(0).pause()},1e3),giaikhuyenkhich.click-1<=giaikhuyenkhich.step)return stopKeyEnd(),$("#stopnum").hide(),!1}function showList(){$("#showlist").after("<p class='mb-0 h4'>K·∫øt qu·∫£ quay s·ªë ƒë√£ ƒë∆∞·ª£c l∆∞u v√†o c∆° s·ªü d·ªØ li·ªáu.</p>"),$("#showlist").remove()}function getTotalWin(t){$("#stopnum").css({cursor:"wait","pointer-events":"none",opacity:".5"}),$("#stopnum").html("ƒêang quay..."),$(".counter").each(function(){var t=$(this),i=giaikhuyenkhich.newlists[giaikhuyenkhich.click-1].length;$({countNum:0}).animate({countNum:i},{duration:giaikhuyenkhich.autotime,easing:"linear",step:function(){t.text(Math.floor(this.countNum))},complete:function(){t.text(this.countNum),$("#stopnum").css({cursor:"pointer","pointer-events":"initial",opacity:"1"}),$("#stopnum").html("D·ª´ng quay")}})}),t&&setTimeout(function(){$("#getnumautosop").hide()},giaikhuyenkhich.autotime*giaikhuyenkhich.press)}function forList(t){$(".boxnonehome").remove();for(var i=[],e=t,n=0;n<e.length;n++){var h=e[n].split(";");i.push('<div class="wheel"><div class="item"><h2><span>'+(n+1)+".</span>"+h[1]+"</h2><p>"+h[3]+"</p><p>"+h[4]+"</p><p>"+h[5]+"</p></div></div>")}return $("#wheels .boxnone").html(i)}function doSearch(){for(var t=giaikhuyenkhich.text,i=[],e=0;e<t.length;e++){var n="<tr><td>"+(e+1)+"</td><td>"+t[e].split(";")[3]+"</td><td>"+t[e].split(";")[1]+"</td><td>"+t[e].split(";")[5]+"</td><td>"+t[e].split(";")[4]+"</td><tr>";i.push(n)}$(".table-kienlong tbody").append(i),$(".resultbox").show(),$(".getloading").hide()}function ketqua(){$(".wheels, .text-kienlong, .boxnone").hide(),$(".getloading").show(),doSearch()}getData();