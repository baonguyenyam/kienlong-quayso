var interval,giaikhuyenkhich={text:"XXXXXX",chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",lists:[],lastkey:"",click:1,play:1,press:1,ltr:!1,newlists:[],animation:4,result:[]},buildListHeader=[];function updateUerWin(i){for(var e=[],t=0;t<i.length;t++){var n=i[t].split(";")[0];e.push(n)}var h=e.toString();0<e.length&&$.ajax({url:AppURL.giai_khuyenkhich_update+h,type:"GET",dataType:"json",cache:!0,complete:function(i){}})}function getData(){$.ajax({url:AppURL.giai_khuyenkhich,type:"GET",dataType:"json",cache:!0,complete:function(i){var e=i.responseJSON.data_giaikhuyenkhich;giaikhuyenkhich.text=e.lists,giaikhuyenkhich.autotime=e.autotime,giaikhuyenkhich.step=e.step,giaikhuyenkhich.autostop=e.autostop,giaikhuyenkhich.lists=e.lists,giaikhuyenkhich.imgs=e.imgs,giaikhuyenkhich.columnTitle=e.columnTitle.split(","),giaikhuyenkhich.displayOnResult=e.displayOnResult.toLowerCase().split(","),giaikhuyenkhich.displayOnTable=e.displayOnTable.toLowerCase().split(","),giaikhuyenkhich.titleOnResult=e.titleOnResult.split(","),updateUerWin(giaikhuyenkhich.lists),getPerLoop(giaikhuyenkhich.lists,giaikhuyenkhich.step),e.bgimg&&setTimeout(function(){$("body").css({"background-image":"url("+e.bgimg+")"})},200),e.demo&&DemoMode()}})}function getPerLoop(i,e){var t=Math.floor(parseInt(i.length)/parseInt(e)),n=i.length-t*e;if(i.length%e==0)for(var h=0;h<e;h++)giaikhuyenkhich.newlists[h]=i.slice(h*t,t+h*t);else for(h=0;h<e;h++)if(h<n)for(var a=0;a<n;a++)giaikhuyenkhich.newlists[a]=i.slice(a*t+a,t+a*t+(a+1));else giaikhuyenkhich.newlists[h]=i.slice(h*t+1,t+h*t+1);$(".text-kienlong-per").html("L·∫ßn quay "+giaikhuyenkhich.click+"/"+e)}function shuffle(i){for(var e,t,n=i.length;0!==n;)t=Math.floor(Math.random()*n),e=i[n-=1],i[n]=i[t],i[t]=e;return i}function sf(){return shuffle(giaikhuyenkhich.chars.split(""))}function getRandomKey(){$(".timthay").show();var i=giaikhuyenkhich.autostop;getTotalWin(i),$("#wheels .boxnone").removeClass("showlist").addClass("animated").css({"animation-duration":giaikhuyenkhich.newlists[giaikhuyenkhich.click-1].length*giaikhuyenkhich.animation/100+"s"}),$(".text-kienlong-per").html("L·∫ßn quay "+giaikhuyenkhich.click+"/"+giaikhuyenkhich.step),document.title="ƒêang t√¨m ng∆∞·ªùi may m·∫Øn...",$(".stepbystep p").html("ƒêang quay s·ªë..."),$("#jackpot").get(0).play();document.getElementById("getnum");var e=document.getElementById("getnumautosop");if(forList(giaikhuyenkhich.newlists[giaikhuyenkhich.click-1]),i){giaikhuyenkhich.autotime;var t=giaikhuyenkhich.press;countDown(),e.setAttribute("disabled","disabled");var n=setInterval(function(){stopKey(),--t<=0?clearInterval(n):countDown()},giaikhuyenkhich.autotime)}else $("#getnum").hide(),$("#getnumautosop").hide(),$(".loading").show(),$("#stopnum").show()}function getKey(i){$("#wheels .boxnone").html(),forList(giaikhuyenkhich.newlists[giaikhuyenkhich.click-1])}function countDown(){var i=giaikhuyenkhich.autotime/1e3,e=document.getElementById("getnumautosop");e.innerHTML="ƒêang quay - ("+i+")";var t=setInterval(function(){(i-=1)<0?clearInterval(t):(document.title="("+i+") - ƒêang t√¨m ng∆∞·ªùi may m·∫Øn...",e.innerHTML="ƒêang quay - ("+i+")")},1e3)}function stopKeyEnd(){$("#jackpot").get(0).pause(),$(".loading").hide(),$(".boxnone").animate({scrollTop:0},0),setTimeout(function(){$("body").addClass("phaono"),$("#congrats").show(),document.title="‚ú®üåü Xin ch√∫c m·ª´ng! üåü‚ú®",fancyPopIn(),$("#buzzer").get(0).play()},300),setTimeout(function(){giaikhuyenkhich.click-1<giaikhuyenkhich.step?($("#getnumautosop").removeAttr("disabled").html("Quay s·ªë"),$("#getnumautosop").show()):($("#ketqua").show(),updateUerWin(giaikhuyenkhich.lists),$(".timthay").html("T√¨m th·∫•y t·ªïng c·ªông "+giaikhuyenkhich.text.length+" ng∆∞·ªùi may m·∫Øn")),$("body").removeClass("phaono")},2e3)}function stopKey(){if($("#pot").get(0).play(),$("#wheels .boxnone").removeClass("animated"),$(".wheels").addClass("showlist"),$("#wheels .boxnone").addClass("showlist"),giaikhuyenkhich.click++,setTimeout(function(){$("#pot").get(0).pause()},1e3),giaikhuyenkhich.click-1<=giaikhuyenkhich.step)return stopKeyEnd(),$("#stopnum").hide(),!1}function showList(){$("#showlist").after("<p class='mb-0 h4'>K·∫øt qu·∫£ quay s·ªë ƒë√£ ƒë∆∞·ª£c l∆∞u v√†o c∆° s·ªü d·ªØ li·ªáu.</p>"),$("#showlist").remove()}function getTotalWin(i){$("#stopnum").css({cursor:"wait","pointer-events":"none",opacity:".5"}),$("#stopnum").html("ƒêang quay..."),$(".counter").each(function(){var i=$(this),e=giaikhuyenkhich.newlists[giaikhuyenkhich.click-1].length;$({countNum:0}).animate({countNum:e},{duration:giaikhuyenkhich.autotime,easing:"linear",step:function(){i.text(Math.floor(this.countNum))},complete:function(){i.text(this.countNum),$("#stopnum").css({cursor:"pointer","pointer-events":"initial",opacity:"1"}),$("#stopnum").html("D·ª´ng quay")}})}),i&&setTimeout(function(){$("#getnumautosop").hide()},giaikhuyenkhich.autotime*giaikhuyenkhich.press)}function forList(i){$(".boxnonehome").remove();for(var e=[],t=i,n=0;n<t.length;n++){for(var h=t[n].split(";"),a="",o=0;o<giaikhuyenkhich.columnTitle.length-4;o++)"true"===giaikhuyenkhich.displayOnResult[o+4]&&(a+="<p>"+giaikhuyenkhich.titleOnResult[o+4]+h[o+4]+"</p>");e.push('<div class="wheel"><div class="item"><h2><span>'+(n+1)+".</span>"+h[3]+"</h2>"+a+"</div></div>")}return $("#wheels .boxnone").html(e)}function buildHeader(){buildListHeader.push('<th scope="col">STT</th>');for(var i=0;i<giaikhuyenkhich.columnTitle.length-3;i++)"true"===giaikhuyenkhich.displayOnTable[i+3]&&buildListHeader.push('<th scope="col">'+giaikhuyenkhich.columnTitle[i+3]+"</th>")}function doSearch(){for(var i=giaikhuyenkhich.text,e=[],t=0;t<i.length;t++){var n=[];n.push("<td>"+(t+1)+"</td>");for(var h=0;h<giaikhuyenkhich.columnTitle.length-3;h++)"true"===giaikhuyenkhich.displayOnTable[h+3]&&n.push("<td>"+i[t].split(";")[h+3]+"</td>");var a="<tr>"+n+"<tr>";e.push(a)}$(".table-kienlong thead tr").html(buildListHeader),$(".table-kienlong tbody").html(e),$(".resultbox").show(),$(".getloading").hide()}function ketqua(){$(".wheels, .text-kienlong, .boxnone").hide(),$(".getloading").show(),buildHeader(),doSearch()}getData();