var siteSetting={bgimg:"./img/bg-giainhat.jpg",iconimg:"./img/giaithuong-vang.png",btnquayso:"./img/btnquayso.png",btnImage:"true",width:"1600",height:"900",boxBorder:"#fff842",boxBg:"#17d0f4",boxNumBg:"#055c6d",boxNumColor:"#FFFFFF",boxX:"33.3333",boxY:"36",btnQuaySoX:"43.2",btnQuaySoY:"56",ketquaX:"40",ketquaY:"70",anhX:"70",anhY:"55",lineHeight:"24",fontSize:"18",textAlign:"center",textChucMung:"#ff0000",textTen:"#0a05ff",textMSDT:"#055c6d",textDonVi:"#242424",tblBorder:"#f0d234",tblHeadBg:"#055c6d",tblHeadCo:"#FFFFFF",tblBgOdd:"#dfdfdf",tblCoOdd:"#000000",tblBgEven:"#ff0000",tblCoEven:"#FFFFFF",khuyenkhichX:"15",khuyenkhichY:"35",khuyenkhichWidth:"70",khuyenkhichColumns:"3",khuyenkhichChucMung:"#ffffff",khuyenkhichMS:"#0eff6e",khuyenkhichDonVi:"#ede400"},getW=$("#tempboard").width(),setH=siteSetting.height*getW/siteSetting.width,PerCent=100*getW/siteSetting.width,igw=$("#board .hinhanh").width(),igh=$("#board .hinhanh").height(),imgNewW=igw*PerCent/100,imgNewH=igh*PerCent/100,currentScreen="";function callValue(e){$("#loading").removeClass("done").removeClass("finished"),toggleCurrentScreen(currentScreen=e),$.ajax({url:"/data_settings_"+e+".json",type:"GET",dataType:"json",cache:!0,complete:function(e){siteSettingFun(siteSetting=e.responseJSON.siteSetting,siteSetting.height,siteSetting.width,imgNewH,imgNewW),setH=siteSetting.height*getW/siteSetting.width,PerCent=100*getW/siteSetting.width,loadData(siteSetting),$(".cppicker").colorpicker(),$("#menu input, #menu select").each(function(){$(this).on("keyup keypress change",function(e){console.log();var t=$(this).val(),o=$(this).attr("data-change"),a=$(this).attr("id");$("[data-set-"+a+"]")&&$("[data-set-"+a+"]").length&&("boxX"===a||"boxY"===a||"btnQuaySoX"===a||"btnQuaySoY"===a||"ketquaX"===a||"ketquaY"===a||"anhX"===a||"anhY"===a||"khuyenkhichX"===a||"khuyenkhichY"===a||"khuyenkhichWidth"===a?$("[data-set-"+a+"]").css(o,t+"%"):"fontSize"===a||"lineHeight"===a?$("[data-set-"+a+"]").css(o,t+"px"):"khuyenkhichColumns"===a?$("[data-set-"+a+"]").attr(o,t):$("[data-set-"+a+"]").css(o,t),siteSetting[a]=t)})}),$("#set-0 a").trigger("click"),setTimeout(function(){$("#loading").addClass("done")},200),setTimeout(function(){$("#loading").removeClass("done").addClass("finished")},1e3)}})}function siteSettingFun(o,a,n,i,h){reSet(),setTimeout(function(){var e=a*getW/n,t=i*imgNewW/h;$("#board").css({"background-image":"url("+o.bgimg+")","background-size":"cover","background-position":"center center",height:e+"px"}),$("#board .boxquayso").css({"border-color":o.boxBorder,width:getW/3,background:o.boxBg,top:o.boxY+"%",left:o.boxX+"%"}),$("#board .boxquayso .text").css({background:o.boxNumBg,color:o.boxNumColor}),$("#board .btnquayso").css({top:o.btnQuaySoY+"%",left:o.btnQuaySoX+"%"}),$("#board .ketqua").css({top:o.ketquaY+"%",left:o.ketquaX+"%","font-size":o.fontSize+"px","line-height":o.lineHeight+"px","text-align":o.textAlign}),$("#board .khuyenkhich").css({width:o.khuyenkhichWidth+"%",top:o.khuyenkhichY+"%",left:o.khuyenkhichX+"%","border-color":o.boxBorder,background:o.boxBg}).attr("columns",o.khuyenkhichColumns),$("#board .khuyenkhich .text").css({background:o.boxNumBg}),$("#board .khuyenkhich .name").css({color:o.khuyenkhichChucMung}),$("#board .khuyenkhich .msdt").css({color:o.khuyenkhichMS}),$("#board .khuyenkhich .donvi").css({color:o.khuyenkhichDonVi}),$("#board .ketqua .chucmung").css({color:o.textChucMung}),$("#board .ketqua .ten").css({color:o.textTen}),$("#board .ketqua .msdt").css({color:o.textMSDT}),$("#board .ketqua .donvi").css({color:o.textDonVi}),$("#board .hinhanh").css({height:t+"px",top:o.anhY+"%",left:o.anhX+"%"}),$("#board .tableres").css({top:o.boxY+"%"}),$("#board .tableres [data-set-tblHeadBg]").css({background:o.tblHeadBg,"border-color":o.tblBorder}),$("#board .tableres [data-set-tblHeadCo]").css({color:o.tblHeadCo,"border-color":o.tblBorder}),$("#board .tableres [data-set-tblBgOdd]").css({background:o.tblBgOdd,"border-color":o.tblBorder}),$("#board .tableres [data-set-tblCoOdd]").css({color:o.tblCoOdd,"border-color":o.tblBorder}),$("#board .tableres [data-set-tblBgEven]").css({background:o.tblBgEven,"border-color":o.tblBorder}),$("#board .tableres [data-set-tblCoEven]").css({color:o.tblCoEven,"border-color":o.tblBorder}),"true"===o.btnImage&&$(".btnquayso").addClass("active"),$(".btnquayso img").attr("src",o.btnquayso),$(".hinhanh img").attr("src",o.iconimg)},200)}function sizeChange(t,o){reSet(),setTimeout(function(){var e=o*PerCent/100*getW/(t*PerCent/100);$("#board").css({height:e+"px",width:getW+"px"})})}function loadData(e){for(var t in e)e.hasOwnProperty(t)&&($("#"+t).val(e[t]),"btnImage"===t&&"true"===e[t]&&$("#"+t).prop("checked",!0))}function reSet(){$("#board").css({height:"initial",width:"initial"}),$("#board .hinhanh").css({height:imgNewH,width:imgNewW})}function toggleCurrentScreen(e){$(".boxquayso, .btnquayso, .ketqua, .hinhanh, .khuyenkhich, .tableres").addClass("d-none"),"giaidacbiet"===e||"giainhat"===e||"giainhi"===e?($("#set-4, #set-5").show(),$("#set-7").hide(),$(".boxquayso, .btnquayso, .ketqua, .hinhanh").removeClass("d-none"),$("#getSet-2 .no-gutters .col").show().parent().removeClass("mt-1"),$("#getSet-2 .form-group:last-child").show()):"giaikhuyenkhich"===e&&($("#set-7").show(),$("#set-4, #set-5").hide(),$(".khuyenkhich, .btnquayso").removeClass("d-none"),$("#getSet-2 .no-gutters .col").hide().parent().addClass("mt-1"),$("#getSet-2 .form-group:last-child").hide())}function toggleScreen(e){$(".boxquayso, .btnquayso, .ketqua, .hinhanh, .khuyenkhich, .tableres").addClass("d-none"),"set-6"===e.attr("id")?$(".tableres").removeClass("d-none"):toggleCurrentScreen(currentScreen),$(".activebox, .activebox-lagre, .activebox-board").each(function(){$(this).removeClass("activebox activebox-lagre activebox-board")}),$("#accordion .card-header").each(function(){$(this).removeClass("active")}),e.addClass("active"),e.attr("data-activebox")&&e.attr("data-activebox").length&&setTimeout(function(){$(e.attr("data-activebox")).addClass(e.attr("data-activebox-class"))},500)}function saveDataToServer(){alert(JSON.stringify(siteSetting)),console.log(siteSetting)}$(".btnquayso img").width($(".btnquayso img").width()*PerCent/100),$(document).ready(function(){callValue("giaidacbiet")}),$(document).ready(function(){$("#width, #height").on("focusout blur change",function(e){sizeChange($("#width").val(),$("#height").val())}),$("#pageChange").on("change",function(e){callValue(e.target.value)}),$("#btnImage").on("change",function(e){console.log(e.target.value),"true"===e.target.value?($(this).prop("checked",!1),$(this).val("false"),$(".btnquayso").removeClass("active")):($(this).prop("checked",!0),$(this).val("true"),$(".btnquayso").addClass("active"))}),$("#khuyenkhichColumns").TouchSpin({min:1,max:6,step:1}),$("#width, #height").TouchSpin({min:0,max:1e6,step:1,postfix:"px"}),$("#fontSize, #lineHeight").TouchSpin({min:12,max:200,step:1,postfix:"px"}),$("#boxX, #boxY, #btnQuaySoX, #btnQuaySoY, #ketquaX, #ketquaY, #anhX, #anhY, #khuyenkhichX, #khuyenkhichY, #khuyenkhichWidth").TouchSpin({min:0,max:1e6,step:.1,decimals:5,postfix:"%"}),$("#accordion .card-header").each(function(){$(this).on("click",function(){toggleScreen($(this))})})});