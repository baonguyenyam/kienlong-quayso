var quayso={nhapchuot:0,blockset:6,blockpath:30,degree:1800},newbpath=360/quayso.blockset,newblock=360/quayso.blockset-quayso.blockpath;function quaySoCuoi(){return 1==soNgauNhien(1,2)?soNgauNhien(5*newbpath+(newblock+1),6*newbpath):soNgauNhien(1,newblock)}function soNgauNhien(n,e){return Math.floor(Math.random()*(e-n+1))+n}function updateGift(n){$.ajax({url:"/luckydrawsave.ashx?q="+n,type:"GET",dataType:"json",cache:!0,complete:function(n){}})}$(document).ready(function(){$("#spin").click(function(){$.ajax({url:"/luckydraw.ashx",type:"GET",dataType:"json",cache:!0,error:function(n,e,t){alert("Error")},complete:function(n){document.title="Đang tìm quà may mắn...",$(".stepbystep p").html("Đang quay số..."),$("#jackpot").get(0).play(),$("#getnum, .chucmung").hide(),$(".loading").show(),$(this).css({cursor:"wait","pointer-events":"none"}),quayso.nhapchuot++;var e,t=quayso.degree*quayso.nhapchuot,o=n.responseJSON.code[Math.floor(Math.random()*n.responseJSON.code.length)];e="A"===o?soNgauNhien(newblock+1,newbpath+newblock):"B"===o?soNgauNhien(newbpath+(newblock+1),2*newbpath+newblock):"C"===o?soNgauNhien(2*newbpath+(newblock+1),3*newbpath+newblock):"D"===o?soNgauNhien(3*newbpath+(newblock+1),4*newbpath+newblock):"E"===o?soNgauNhien(4*newbpath+(newblock+1),5*newbpath+newblock):quaySoCuoi(),gocquay=t+e;var a=gocquay-t;$("#wheel .sec").each(function(){a>30&&a<=90?$("#res").html("Bạn không trúng món quà nào cả! <span id='momqua'></span>"):a>90&&a<=150?$("#res").html("Bạn đã trúng 01 Áo mưa"):a>150&&a<=210?$("#res").html("Bạn đã trúng 01 Túi du lịch"):a>210&&a<=270?$("#res").html("Bạn đã trúng 01 Mũ bảo hiểm"):a>270&&a<=330?$("#res").html("Bạn đã trúng 01 Bộ hộp thủy tinh"):$("#res").html("Bạn đã trúng 01 Bình giữ nhiệt");var n=$(this),e=0,t=setInterval(function(){1800===++e&&(clearInterval(t),$(".loading").hide(),$("#congrats, .chucmung").show(),$("#buzzer").get(0).play(),$("#jackpot").get(0).pause(),$(".stepbystep p").html("Quay số hoàn tất!"),document.title="✨🌟 Xin chúc mừng! 🌟✨",fancyPopIn(),setTimeout(function(){$("#spin").css({cursor:"initial","pointer-events":"initial"})},2e3)),n.offset().top<23.89&&($("#spin").addClass("spin"),setTimeout(function(){$("#spin").removeClass("spin")},100))},0);$("#inner-wheel").css({transform:"rotate("+gocquay+"deg)"}),n.offset().top}),updateGift(o)}})})});